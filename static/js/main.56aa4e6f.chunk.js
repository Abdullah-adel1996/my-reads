(this["webpackJsonpmy-books"]=this["webpackJsonpmy-books"]||[]).push([[0],{23:function(e,t,a){e.exports=a(35)},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(20),c=a.n(r),s=a(11),l=a(4),i=a(5),u=a(7),h=a(6),d=a(8),p=a(10),b=a(17),m="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var k={Accept:"application/json",Authorization:f},v=function(){return fetch("".concat(m,"/books"),{headers:k}).then((function(e){return e.json()})).then((function(e){return e.books}))},y=function(e,t){return fetch("".concat(m,"/books/").concat(e.id),{method:"PUT",headers:Object(b.a)({},k,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},E=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleBookUpdate",value:function(e){var t=e.target.value;this.props.updateHandler(this.props,t)}},{key:"render",value:function(){var e=this;return o.a.createElement("li",null,o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{backgroundImage:'url("'.concat(this.props.imageLinks.thumbnail,'")')}}),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("select",{value:this.props.shelf,onChange:function(t){return e.handleBookUpdate(t)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read")))),o.a.createElement("div",{className:"book-title"},this.props.title),o.a.createElement("div",{className:"book-authors"},this.props.authors)))}}]),t}(n.Component),g=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.books.map((function(t){return o.a.createElement(E,Object.assign({key:t.pageCount},t,{updateHandler:e.props.updateHandler}))}));return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},this.props.caption),o.a.createElement("ul",{className:"books-grid bookshelf-books"},t))}}]),t}(n.Component),j=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={books:[]},a.arrayGrouping=function(e){return a.state.books.filter((function(t){return t.shelf===e}))},a.changeShelf=function(e,t){var n=a.state.books;n.forEach((function(a,o){a.id===e.id&&(n[o].shelf=t)})),a.setState({books:n})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;v().then((function(t){e.setState({books:t})}))}},{key:"updateHandler",value:function(e,t){this.changeShelf(e,t),y(e,t).then()}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement(g,{caption:"Currently Reading",books:this.arrayGrouping("currentlyReading"),updateHandler:this.updateHandler.bind(this)}),o.a.createElement(g,{caption:"Want to Read",books:this.arrayGrouping("wantToRead"),updateHandler:this.updateHandler.bind(this)}),o.a.createElement(g,{caption:"Read",books:this.arrayGrouping("read"),updateHandler:this.updateHandler.bind(this)})),o.a.createElement("div",{className:"open-search"},o.a.createElement(s.b,{to:"/Search"},o.a.createElement("button",null,"Add a book"))))}}]),t}(n.Component),O=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",books:[]},a.updateQuery=function(e){a.setState((function(){return{query:e.trim()}}))},a.changeShelf=function(e,t){var n=a.state.books;n.forEach((function(a,o){a.id===e.id&&(n[o].shelf=t)})),a.setState({books:n})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;v().then((function(t){e.setState({books:t})}))}},{key:"updateHandler",value:function(e,t){this.changeShelf(e,t),y(e,t).then()}},{key:"render",value:function(){var e=this,t=""===this.state.query?null:this.state.books.filter((function(t){return t.title.toLowerCase().includes(e.state.query.toLowerCase())})).map((function(t){return o.a.createElement(E,Object.assign({key:t.id},t,{updateHandler:function(t,a){return e.updateHandler(t,a)}}))}));return o.a.createElement("div",null,o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(s.b,{className:"close-search",to:"/"},"Close"),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",value:this.state.query,onChange:function(t){return e.updateQuery(t.target.value)}}))),o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ul",{className:"books-grid"},t)))}}]),t}(n.Component),N=(a(33),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(p.c,null,o.a.createElement(p.a,{path:"/",exact:!0,component:j}),o.a.createElement(p.a,{path:"/Search",component:O})))}}]),t}(n.Component)),S=(a(34),o.a.createElement(s.a,null,o.a.createElement(N,null)));c.a.render(S,document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.56aa4e6f.chunk.js.map